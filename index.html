<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FLDP GIS Demo Site</title>
  <link rel="stylesheet" href="style.css" />
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />
  <style>
    #intro-modal {
      position: absolute;
      top: 100px;
      left: 50px;
      z-index: 2000;
      background: rgba(255, 255, 255, 0.95);
      padding: 16px;
      max-width: 320px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.3);
      border-radius: 8px;
    }

    #intro-modal h2 {
      margin-top: 0;
      font-size: 18px;
    }

    #intro-modal button {
      margin-top: 10px;
      padding: 6px 12px;
      font-size: 13px;
      cursor: pointer;
    }

    body.dark-theme {
      background-color: #1e1e1e;
      color: #eee;
    }

    body.dark-theme .modal-content,
    body.dark-theme .leaflet-control,
    body.dark-theme .leaflet-popup-content-wrapper,
    body.dark-theme .leaflet-control-layers {
      background: #2c2c2c;
      color: #eee;
    }

    body.dark-theme footer {
      background-color: #2c2c2c;
      color: #ccc;
    }

    footer {
      background-color: #f1f1f1;
      padding: 20px;
      font-size: 14px;
      text-align: center;
      color: #333;
      border-top: 1px solid #ccc;
      width: 100%;
      box-sizing: border-box;
      min-height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #theme-toggle {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 2000;
      padding: 8px 12px;
      border: none;
      border-radius: 4px;
      background: #fff;
      box-shadow: 0 0 6px rgba(0,0,0,0.2);
      cursor: pointer;
    }

    body.dark-theme #theme-toggle {
      background: #444;
      color: #fff;
    }

    html, body {
      height: 100%;
      margin: 0;
    }

    #map {
      height: calc(100vh - 160px); /* Leave more space for the footer */
      width: 100%;
      position: relative;
      z-index: 1;
    }
  </style>
</head>
<body>
  <button id="theme-toggle" title="Toggle Light/Dark Mode">ðŸŒ“</button>
  <header>
    <div class="header-content">
      <img src="assets/fldp_final_color.png" alt="FLDP Logo" class="logo" />
      <h1 class="site-title">FLDP Potential Project GIS Demo</h1>
    </div>
  </header>

  <main>
    <div id="map"></div>
  </main>
  <div id="intro-modal">
    <div class="modal-content">
      <h2>Welcome to the FLDP GIS Demo</h2>
      <p>This interactive map highlights two potential development sites within the proposed expansion of the Hillsborough County Urban Service Area, along with additional layers including zoning, wetlands, SWFWMD floodplains, and FEMA data.</p>
      <p>Use the layer toggle on the right to turn layers on or off. Click on features for more information.</p>
      <button id="close-intro">Got it</button>
    </div>
  </div>

  <footer>
    <p>
      Florida Land Design & Permitting, Inc. |
      <a href="mailto:info@fldandp.com">info@fldandp.com</a> |
      <a href="https://fldandp.com" target="_blank">fldandp.com</a> |
      (727) 478-2421
    </p>
  </footer>

  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  ></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const mapDiv = document.getElementById('map');
      if (!mapDiv) {
        console.error("Map container #map not found.");
      } else {
        console.log("Map container detected and ready.");
      }
    });
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const modal = document.getElementById('intro-modal');
      const closeBtn = document.getElementById('close-intro');
      closeBtn.addEventListener('click', () => {
        modal.style.display = 'none';
      });
    });
  </script>

  <script>
    const toggleBtn = document.getElementById('theme-toggle');
    toggleBtn.addEventListener('click', () => {
      document.body.classList.toggle('dark-theme');
      // Optional: add code here to switch base map layers if needed
    });
  </script>
  <script src="scripts/map.js"></script>
</body>
</html>
